import sys
import urllib3
import requests
from bs4 import BeautifulSoup
from utils import login

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)



def buy_item(session: requests.Session, url : str):
    url = url.rstrip("/")
    # 1) login
    print("trying to logging as wiener")
    login_url = f"{url}/login"
    login(session, login_url, "wiener", "peter")
    print("(+) Logged-in")

    # 2) 


def main():
    if len(sys.argv) != 2:
        print(f"(+) Usage : {sys.argv[0]} <url>")
        sys.exit(-1)
    session = requests.Session()
    buy_item(session, sys.argv[1])

if __name__ == "__main__":
    main()
